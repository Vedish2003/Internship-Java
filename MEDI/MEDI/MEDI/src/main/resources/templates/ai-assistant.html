<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MediScan AI Assistant</title>
  <style>
    /* ===== Global Styles ===== */
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #cfe9ff, #e4f3ff, #ffffff);
      height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      color: #003366;
    }

    h2 {
      font-size: 22px;
      margin-bottom: 15px;
      font-weight: 600;
      color: #004c91;
      text-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
    }

    /* ===== Chat Container ===== */
    .chat-container {
      width: 400px;
      height: 550px;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: rgba(255, 255, 255, 0.25);
      border-radius: 20px;
      box-shadow: 0 6px 25px rgba(0, 102, 204, 0.25);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      padding: 18px;
      transition: all 0.4s ease;
    }

    /* ===== Chat Box ===== */
    .chat-box {
      width: 100%;
      height: 400px;
      background: rgba(255, 255, 255, 0.35);
      border-radius: 14px;
      padding: 10px;
      overflow-y: auto;
      box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.08);
      display: flex;
      flex-direction: column;
      scroll-behavior: smooth;
    }

    /* ===== Messages ===== */
    .message {
      margin: 5px 0;
      padding: 8px 12px;
      border-radius: 14px;
      max-width: 80%;
      line-height: 1.4;
      font-size: 14px;
      word-wrap: break-word;
      animation: fadeIn 0.3s ease-in-out;
    }

    .user {
      background: linear-gradient(135deg, #007bff, #00b4d8);
      color: #fff;
      align-self: flex-end;
      border-top-right-radius: 0;
    }

    .bot {
      background: rgba(255, 255, 255, 0.6);
      color: #002a4d;
      align-self: flex-start;
      border-top-left-radius: 0;
      border: 1px solid rgba(255, 255, 255, 0.4);
    }

    .typing {
      font-style: italic;
      color: #666;
      opacity: 0.8;
      animation: blink 1.2s infinite;
    }

    /* ===== Input Area ===== */
    .input-area {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 14px;
      margin-top: 12px;
      padding: 4px;
      box-shadow: 0 3px 10px rgba(0, 102, 204, 0.1);
      width: 100%;
    }

    input {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      color: #003366;
      font-size: 14px;
      padding: 8px;
    }

    button {
      border: none;
      background: linear-gradient(135deg, #007bff, #00b4d8);
      color: white;
      border-radius: 12px;
      padding: 8px 10px;
      cursor: pointer;
      margin-left: 4px;
      font-size: 13px;
      transition: all 0.3s ease;
    }

    button:hover {
      transform: scale(1.05);
      background: linear-gradient(135deg, #0062cc, #008acb);
    }

    /* ===== Animations ===== */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes blink {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    /* ===== Scrollbar ===== */
    .chat-box::-webkit-scrollbar {
      width: 6px;
    }
    .chat-box::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.15);
      border-radius: 3px;
    }
  </style>
</head>
<body>

  <h2>ðŸ©º MediScan AI Assistant</h2>

  <div class="chat-container">
    <div class="chat-box" id="chatBox">
      <div class="message bot">
        Hello ðŸ‘‹! Iâ€™m MediScan AI Assistant.<br>
        Which language would you like to talk in â€” English, Hindi, or Kannada?
      </div>
    </div>

    <div class="input-area">
      <input id="userInput" type="text" placeholder="Type or speak..." autofocus>
      <button onclick="sendMessage()">ðŸ’¬</button>
      <button onclick="startVoiceRecognition()">ðŸŽ¤</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById("chatBox");
    let selectedLang = "en";

    function appendMessage(sender, text) {
      const msg = document.createElement("div");
      msg.classList.add("message", sender);
      msg.textContent = text;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function appendTyping() {
      const msg = document.createElement("div");
      msg.classList.add("message", "bot", "typing");
      msg.textContent = "MediScan is typing...";
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
      return msg;
    }

    async function sendMessage() {
      const input = document.getElementById("userInput");
      const message = input.value.trim();
      if (message === "") return;

      appendMessage("user", message);
      input.value = "";

      detectLanguage(message);
      const typingMsg = appendTyping();

      setTimeout(() => {
        typingMsg.remove();
        const reply = getReply(message);
        appendMessage("bot", reply);
        speakResponse(reply);
      }, 800);
    }

    function detectLanguage(text) {
      const lower = text.toLowerCase();
      if (lower.includes("hindi") || lower.includes("à¤¹à¤¿à¤¨à¥à¤¦à¥€")) selectedLang = "hi";
      else if (lower.includes("kannada") || lower.includes("à²•à²¨à³à²¨à²¡")) selectedLang = "kn";
      else selectedLang = "en";
    }

    function getReply(message) {
      const lower = message.toLowerCase();
      if (selectedLang === "en") {
        if (lower.includes("fever")) return "It seems you have a fever. Stay hydrated and consult a doctor if it lasts over 2 days.";
        if (lower.includes("cold")) return "Looks like a cold. Rest well and stay warm.";
        return "Iâ€™m here to help! Could you please describe your symptoms?";
      }
      if (selectedLang === "hi") {
        if (lower.includes("à¤¬à¥à¤–à¤¾à¤°") || lower.includes("fever")) return "à¤²à¤—à¤¤à¤¾ à¤¹à¥ˆ à¤†à¤ªà¤•à¥‹ à¤¬à¥à¤–à¤¾à¤° à¤¹à¥ˆà¥¤ à¤†à¤°à¤¾à¤® à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤ªà¤¾à¤¨à¥€ à¤œà¤¼à¥à¤¯à¤¾à¤¦à¤¾ à¤ªà¤¿à¤à¤à¥¤";
        return "à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤®à¤¦à¤¦ à¤•à¥‡ à¤²à¤¿à¤ à¤¯à¤¹à¤¾à¤ à¤¹à¥‚à¤! à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤ªà¤¨à¥‡ à¤²à¤•à¥à¤·à¤£ à¤¬à¤¤à¤¾à¤‡à¤à¥¤";
      }
      if (selectedLang === "kn") {
        if (lower.includes("à²œà³à²µà²°") || lower.includes("fever")) return "à²¨à²¿à²®à²—à³† à²œà³à²µà²°à²µà²¾à²—à²¿à²¦à³†. à²µà²¿à²¶à³à²°à²¾à²‚à²¤à²¿ à²¤à³†à²—à³†à²¦à³à²•à³Šà²³à³à²³à²¿ à²®à²¤à³à²¤à³ à²¨à³€à²°à³ à²¹à³†à²šà³à²šà³ à²•à³à²¡à²¿à²¯à²¿à²°à²¿.";
        return "à²¨à²¾à²¨à³ à²¸à²¹à²¾à²¯ à²®à²¾à²¡à²²à³ à²‡à²²à³à²²à²¿à²¦à³à²¦à³‡à²¨à³†! à²¦à²¯à²µà²¿à²Ÿà³à²Ÿà³ à²¨à²¿à²®à³à²® à²²à²•à³à²·à²£à²—à²³à²¨à³à²¨à³ à²µà²¿à²µà²°à²¿à²¸à²¿.";
      }
    }

    function startVoiceRecognition() {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      if (!SpeechRecognition) return alert("Speech recognition not supported.");

      const recognition = new SpeechRecognition();
      recognition.lang = getVoiceLang(selectedLang);
      recognition.interimResults = false;

      appendMessage("bot", "ðŸŽ¤ Listening...");
      recognition.onresult = (e) => {
        const transcript = e.results[0][0].transcript;
        document.getElementById("userInput").value = transcript;
        appendMessage("bot", "âœ… Listening complete!");
        sendMessage();
      };
      recognition.start();
    }

    function speakResponse(text) {
      if (!("speechSynthesis" in window)) return;
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = getVoiceLang(selectedLang);
      utterance.rate = 1;
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utterance);
    }

    function getVoiceLang(lang) {
      if (lang === "hi") return "hi-IN";
      if (lang === "kn") return "kn-IN";
      return "en-IN";
    }

    document.getElementById("userInput").addEventListener("keypress", e => {
      if (e.key === "Enter") sendMessage();
    });
  </script>

</body>
</html>
